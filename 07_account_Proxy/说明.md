使用ThreadLocal将connection与线程绑定，然后使用动态代理技术，将重复代码提出来